var Galapagos={};
Y.use("node",function(a){var r=function(){724>=document.documentElement.clientWidth?(a.one(".catnav-container")&&a.one(".nav-container").prepend(a.one(".catnav-list")),a.one("html").addClass("tablet-breakpoint-mixin")):(a.one(".catnav-container")&&a.one(".catnav-container").prepend(a.one(".catnav-list")),a.one("html").removeClass("tablet-breakpoint-mixin"))},e;Galapagos.Site={init:function(){(e=a.one(".collection-type-products"))&&e.hasClass("view-list")&&Galapagos.ProductList.init();e&&e.hasClass("view-item")&&
Galapagos.ProductItem.init();if(a.one("html").hasClass("touch"))var b=a.on("mousemove",function(){a.one("body").addClass("galapagos-desktop-touchscreen");b.detach()});r();a.on("resize",r)},getDocWidth:function(){return a.one(document).get("docWidth")},getDocHeight:function(){return a.one(document).get("docHeight")}};Galapagos.TweakListener={listen:function(b,s){if(a.Global)a.Global.on("tweak:change",a.bind(function(a){a.getName()==b&&"function"===typeof s&&s(a.getValue())}))}};var u=function(){var b=
a.one(".tweak-product-item-image-zoom-enabled");d.each(function(a){ImageLoader.load(a.removeAttribute("data-load"),{load:!0});if(b)a.on("load",function(){t(a)})})},t=function(b){k.push(new a.Squarespace.ImageZoom({host:b.get("parentNode"),behavior:"hover",zoom:parseFloat(a.Squarespace.Template.getTweakValue("tweak-product-item-image-zoom-factor"))}))},x=function(){if(1<=d.size()){var b=[];d.each(function(a){b.push({content:a})});var c=1<d.size();o.delegate("click",function(f){(new a.Squarespace.Lightbox2({controls:{previous:c,
next:c},set:b,currentSetIndex:d.indexOf(f.target)})).render()},"img",this)}},y=function(){if(a.Global)a.Global.on("tweak:close",function(){a.one(".collection-type-products.view-item")&&(k&&!(1>k.length)&&a.Array.each(k,function(a){a.destroy(!0)}),a.one(".tweak-product-item-image-zoom-enabled")&&d.each(function(a){t(a)}))},this)},l,o,d,k=[];Galapagos.ProductItem={init:function(){l=a.QueryString.parse(location.search.substring(1)).category;o=a.one("#jsProductItemImages");d=o.all("img[data-src]");if(l){var b=
a.one("#jsCategoryCrumb"),c=b.one("a"),f=c.getAttribute("href");c.set("text",l).setAttribute("href",f+"?category\x3d"+encodeURIComponent(l));b.removeClass("galapagos-display-none")}u();a.on("resize",function(){u()});y();x()}};var w=function(){for(var b=g;0<b;b--)if(p=h%b,h<=g||4<b){if(0===p){c.addClass("item-grid-"+b);m=!0;break}}else{0===h%9?c.addClass("item-grid-9"):(c.addClass("item-grid-"+g),q=a.all(".productlist-item").slice(-1*(h%g)),v.append(q).addClass("item-grid-"+h%g));m=!0;break}m&&(c.removeClass("loading").removeClass("loading-height"),
i())},i=function(){n.each(function(a){ImageLoader.load(a.removeAttribute("data-load"),{load:!0});a.on("load",function(){a.hasClass("productlist-image--main.has-alt-image")&&a.siblings(".productlist-image--alt").removeClass("galapagos-hidden")})})},j,c,v,n,q,h,g,p,m;Galapagos.ProductList={init:function(){j=a.one("#jsCatNav");c=a.one("#jsProductGrid");v=a.one("#jsProductGridOrphans");n=!a.UA.mobile&&a.one(".show-alt-image-on-hover:not(.product-info-style-overlay)")?c.all("img[data-src]"):c.all("img.productlist-image--main[data-src]");
h=c.all(".productlist-item").size();g=8;p;m=!1;a.on("resize",function(){i(n)});a.Global&&(a.Global.on(["tweak:beforeopen","tweak:close","tweak:reset"],function(){setTimeout(function(){Galapagos.ProductList.init()},1E3)}),a.Global.on(["tweak:beforeopen"],function(){setTimeout(function(){Galapagos.ProductList.init();c.one(".productlist-item").addClass("is-hovered")},1E3)}),a.Global.on(["tweak:close"],function(){setTimeout(function(){Galapagos.ProductList.init();c.one(".productlist-item").removeClass("is-hovered")},
1E3)}));Galapagos.TweakListener.listen("product-grid-style",function(a){"Organic"===a?w():(c.append(q),i())});Galapagos.TweakListener.listen("product-info-style",function(a){"Overlay"===a?c.one(".productlist-item").addClass("is-hovered"):c.one(".productlist-item").removeClass("is-hovered")});Galapagos.TweakListener.listen("productImageAspectRatio",function(){i()});Galapagos.TweakListener.listen("productImageSpacing",function(){i()});if(j)for(var b=j.all(".catnav-item").size()-1;0<b;b--){var d=j.all(".catnav-item").item(b),
f=d.one(".catnav-link"),e=a.QueryString.parse(location.search.substring(1)).category,f=a.QueryString.parse(f.getAttribute("href").substring(2)).category;e&&f&&e===f?d.addClass("active-link"):e||j.one("#jsCatNavRoot").addClass("active-link")}a.one("body").hasClass("product-grid-style-organic")?w():(c.removeClass("loading").removeClass("loading-height"),i(n))}};a.on("domready",function(){Galapagos.Site.init()})});